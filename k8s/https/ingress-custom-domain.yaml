apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: med-doc-ingress
  namespace: dev
  annotations:
    # Use cert-manager to automatically get Let's Encrypt certificate
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
    
    # Redirect HTTP to HTTPS
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
    
    # Increase timeouts for long-running requests
    nginx.ingress.kubernetes.io/proxy-connect-timeout: "600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
    
spec:
  ingressClassName: nginx
  
  tls:
  - hosts:
    # ðŸŽ¯ YOUR CUSTOM DOMAIN - Replace this with your chosen name!
    # Options:
    # 1. Free subdomain: medai.duckdns.org
    # 2. nip.io magic: medai-13-233-123-45.nip.io
    # 3. Your own domain: medai.yourdomain.com
    - REPLACE_WITH_YOUR_DOMAIN  # e.g., medai.duckdns.org
    secretName: med-doc-tls
  
  rules:
  - host: REPLACE_WITH_YOUR_DOMAIN  # Must match the TLS host above
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: web
            port:
              number: 80
